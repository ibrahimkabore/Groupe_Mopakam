<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% comment %} <script src="https://cdn.cinetpay.com/seamless/main.js"></script> {% endcomment %}
    <script src="https://api-checkout.cinetpay.com/v2/payment"></script>
    <style>
        .sdk {
            display: block;
            position: absolute;
            background-position: center;
            text-align: center;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
    <script>
        function checkout() {
            CinetPay.setConfig({
                apikey: '191723936667c0d7c0d48656.82804730',//   YOUR APIKEY
                site_id: '105888863',//YOUR_SITE_ID
                notify_url: 'http://mondomaine.com/notify/',
                mode: 'PRODUCTION'
            });
            CinetPay.getCheckout({
                transaction_id: Math.floor(Math.random() * 100000000).toString(), // YOUR TRANSACTION ID
                amount: 150000,
                currency: 'XOF',
                channels: 'ALL',
                description: 'Test de paiement',   
                 //Fournir ces variables pour le paiements par carte bancaire
                customer_name:"Joe",//Le nom du client
                customer_surname:"Down",//Le prenom du client
                customer_email: "down@test.com",//l'email du client
                customer_phone_number: "088767611",//l'email du client
                customer_address : "BP 0024",//addresse du client
                customer_city: "Antananarivo",// La ville du client
                customer_country : "CM",// le code ISO du pays
                customer_state : "CM",// le code ISO l'état
                customer_zip_code : "06510", // code postal

            });
            CinetPay.waitResponse(function(data) {
                if (data.status == "REFUSED") {
                    if (alert("Votre paiement a échoué")) {
                        window.location.reload();
                    }
                } else if (data.status == "ACCEPTED") {
                    if (alert("Votre paiement a été effectué avec succès")) {
                        window.location.reload();
                    }
                }
            });
            CinetPay.onError(function(data) {
                console.log(data);
            });
        }
    </script>
</head>
<body>
    <style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f8f9fa;
    }
    .payment-container {
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin: 50px auto;
        width: 500px;
    }
    .payment-container h1 {
        text-align: center;
        margin-bottom: 20px;
    }
    .payment-container button {
        background-color: #4caf50;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s;
    }
    .payment-container button:hover {
        background-color: #3e8e41;
    }
</style>
<div class="payment-container">
    <h1>Paiement sécurisé</h1>
    <p>Vous allez être redirigé vers la page de paiement de CinetPay.</p>
    <button onclick="checkout()">Payer</button>
</div>
</body>
</html>  



var axios = require('axios');
var data = JSON.stringify({
  "apikey": "YOUR_APIKEY",
  "site_id": "YOUR_SITEID",
  "transaction_id":  Math.floor(Math.random() * 100000000).toString(), //
  "amount": 100,
  "currency": "XOF",
  "alternative_currency": "",
  "description": " TEST INTEGRATION ",
  "customer_id": "172",
  "customer_name": "KOUADIO",
  "customer_surname": "Francisse",
  "customer_email": "harrissylver@gmail.com",
  "customer_phone_number": "+225004315545",
  "customer_address": "Antananarivo",
  "customer_city": "Antananarivo",
  "customer_country": "CM",
  "customer_state": "CM",
  "customer_zip_code": "065100",
  "notify_url": "https://webhook.site/d1dbbb89-52c7-49af-a689-b3c412df820d",
  "return_url": "https://webhook.site/d1dbbb89-52c7-49af-a689-b3c412df820d",
  "channels": "ALL",
  "metadata": "user1",
  "lang": "FR",
  "invoice_data": {
    "Donnee1": "",
    "Donnee2": "",
    "Donnee3": ""
  }
});

var config = {
  method: 'post',
  url: 'https://api-checkout.cinetpay.com/v2/payment',
  headers: { 
    'Content-Type': 'application/json'
  },
  data : data
};

axios(config)
.then(function (response) {
  console.log(JSON.stringify(response.data));
})
.catch(function (error) {
  console.log(error);
});
